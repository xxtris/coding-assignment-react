{"version":3,"file":"main.js","mappings":"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","sources":["webpack://nrwl-coding-assignment/./server/src/app/app.module.ts","webpack://nrwl-coding-assignment/./server/src/tickets/tickets.controller.ts","webpack://nrwl-coding-assignment/./server/src/tickets/tickets.module.ts","webpack://nrwl-coding-assignment/./server/src/tickets/tickets.service.ts","webpack://nrwl-coding-assignment/./server/src/users/users.controller.ts","webpack://nrwl-coding-assignment/./server/src/users/users.module.ts","webpack://nrwl-coding-assignment/./server/src/users/users.service.ts","webpack://nrwl-coding-assignment/./server/src/utils/random-delay.ts","webpack://nrwl-coding-assignment/external commonjs \"@nestjs/common\"","webpack://nrwl-coding-assignment/external commonjs \"@nestjs/core\"","webpack://nrwl-coding-assignment/external commonjs \"tslib\"","webpack://nrwl-coding-assignment/webpack/bootstrap","webpack://nrwl-coding-assignment/./server/src/main.ts"],"sourcesContent":["import { Module } from '@nestjs/common';\r\n\r\nimport { UsersModule } from '../users/users.module';\r\nimport { TicketsModule } from '../tickets/tickets.module';\r\n\r\n@Module({\r\n  imports: [UsersModule, TicketsModule],\r\n})\r\nexport class AppModule {}\r\n","import {\r\n  NotFoundException,\r\n  UnprocessableEntityException,\r\n  Controller,\r\n  Get,\r\n  Put,\r\n  Post,\r\n  Param,\r\n  Delete,\r\n  Body,\r\n  HttpCode,\r\n} from '@nestjs/common';\r\nimport { randomDelay } from '../utils/random-delay';\r\nimport { TicketsService } from './tickets.service';\r\n\r\n@Controller('tickets')\r\nexport class TicketsController {\r\n  constructor(private ticketsService: TicketsService) {}\r\n\r\n  @Get()\r\n  async getTickets() {\r\n    await randomDelay();\r\n    return this.ticketsService.tickets();\r\n  }\r\n\r\n  @Get(':id')\r\n  async getTicket(@Param('id') id: string) {\r\n    await randomDelay();\r\n    const ticket = await this.ticketsService.ticket(Number(id));\r\n    if (ticket) return ticket;\r\n    throw new NotFoundException();\r\n  }\r\n\r\n  @Post()\r\n  async createTicket(@Body() createDto: { description: string }) {\r\n    await randomDelay();\r\n    return this.ticketsService.newTicket(createDto);\r\n  }\r\n\r\n  @Put(':ticketId/assign/:userId')\r\n  @HttpCode(204)\r\n  async assignTicket(\r\n    @Param('ticketId') ticketId: string,\r\n    @Param('userId') userId: string\r\n  ) {\r\n    await randomDelay();\r\n    const success = await this.ticketsService.assign(\r\n      Number(ticketId),\r\n      Number(userId)\r\n    );\r\n    if (!success) throw new UnprocessableEntityException();\r\n  }\r\n\r\n  @Put(':ticketId/unassign')\r\n  @HttpCode(204)\r\n  async unassignTicket(@Param('ticketId') ticketId: string) {\r\n    await randomDelay();\r\n    const success = await this.ticketsService.unassign(Number(ticketId));\r\n    if (!success) throw new UnprocessableEntityException();\r\n  }\r\n\r\n  @Put(':id/complete')\r\n  @HttpCode(204)\r\n  async markAsComplete(@Param('id') ticketId: string) {\r\n    await randomDelay();\r\n    const success = await this.ticketsService.complete(Number(ticketId), true);\r\n    if (!success) throw new UnprocessableEntityException();\r\n  }\r\n\r\n  @Delete(':id/complete')\r\n  @HttpCode(204)\r\n  async markAsIncomplete(@Param('id') ticketId: string) {\r\n    await randomDelay();\r\n    const success = await this.ticketsService.complete(Number(ticketId), false);\r\n    if (!success) throw new UnprocessableEntityException();\r\n  }\r\n}\r\n","import { Module } from '@nestjs/common';\r\nimport { TicketsService } from './tickets.service';\r\nimport { UsersModule } from '../users/users.module';\r\nimport { TicketsController } from './tickets.controller';\r\n\r\n@Module({\r\n  imports: [UsersModule],\r\n  controllers: [TicketsController],\r\n  providers: [TicketsService],\r\n})\r\nexport class TicketsModule {}\r\n","import { Injectable } from '@nestjs/common';\r\nimport { Ticket } from '@acme/shared-models';\r\nimport { UsersService } from '../users/users.service';\r\n\r\n@Injectable()\r\nexport class TicketsService {\r\n  /*\r\n   * In-memory storage so data is lost on server restart.\r\n   */\r\n  private storedTickets: Ticket[] = [\r\n    {\r\n      id: 1,\r\n      description: 'Install a monitor arm',\r\n      assigneeId: 1,\r\n      completed: false,\r\n    },\r\n    {\r\n      id: 2,\r\n      description: 'Move the desk to the new location',\r\n      assigneeId: 1,\r\n      completed: false,\r\n    },\r\n  ];\r\n\r\n  private nextId = 3;\r\n\r\n  constructor(private usersService: UsersService) {}\r\n\r\n  async tickets(): Promise<Ticket[]> {\r\n    return this.storedTickets;\r\n  }\r\n\r\n  async ticket(id: number): Promise<Ticket | null> {\r\n    return this.storedTickets.find((t) => t.id === id) ?? null;\r\n  }\r\n\r\n  async newTicket(payload: { description: string }): Promise<Ticket> {\r\n    const newTicket: Ticket = {\r\n      id: this.nextId++,\r\n      description: payload.description,\r\n      assigneeId: null,\r\n      completed: false,\r\n    };\r\n\r\n    this.storedTickets.push(newTicket);\r\n\r\n    return newTicket;\r\n  }\r\n\r\n  async assign(ticketId: number, userId: number): Promise<boolean> {\r\n    const ticket = await this.ticket(ticketId);\r\n    const user = await this.usersService.user(userId);\r\n\r\n    if (ticket && user) {\r\n      ticket.assigneeId = +userId;\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async unassign(ticketId: number): Promise<boolean> {\r\n    const ticket = await this.ticket(ticketId);\r\n    if (ticket) {\r\n      ticket.assigneeId = null;\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async complete(ticketId: number, completed: boolean): Promise<boolean> {\r\n    const ticket = await this.ticket(ticketId);\r\n    if (ticket) {\r\n      ticket.completed = completed;\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","import { Controller, Get, Param, NotFoundException } from '@nestjs/common';\r\nimport { randomDelay } from '../utils/random-delay';\r\nimport { UsersService } from './users.service';\r\n\r\n@Controller('users')\r\nexport class UsersController {\r\n  constructor(private usersService: UsersService) {}\r\n\r\n  @Get()\r\n  async getUsers() {\r\n    return this.usersService.users();\r\n  }\r\n\r\n  @Get(':id')\r\n  async getUser(@Param('id') id: string) {\r\n    await randomDelay();\r\n    const user = await this.usersService.user(Number(id));\r\n    if (user) return user;\r\n    throw new NotFoundException();\r\n  }\r\n}\r\n","import { Module } from '@nestjs/common';\r\nimport { UsersService } from './users.service';\r\nimport { UsersController } from './users.controller';\r\n\r\n@Module({\r\n  controllers: [UsersController],\r\n  providers: [UsersService],\r\n  exports: [UsersService],\r\n})\r\nexport class UsersModule {}\r\n","import { Injectable } from '@nestjs/common';\r\nimport { User } from '@acme/shared-models';\r\n\r\n@Injectable()\r\nexport class UsersService {\r\n  /*\r\n   * In-memory storage so data is lost on server restart.\r\n   */\r\n  private storedUsers: User[] = [\r\n    { id: 1, name: 'Alice' },\r\n    { id: 2, name: 'Bob' },\r\n    { id: 3, name: 'Chris' },\r\n    { id: 4, name: 'Daisy' },\r\n    { id: 5, name: 'Ed' },\r\n  ];\r\n\r\n  async users(): Promise<User[]> {\r\n    return this.storedUsers;\r\n  }\r\n\r\n  async user(id: number): Promise<User | null> {\r\n    return this.storedUsers.find((user) => user.id === +id) ?? null;\r\n  }\r\n}\r\n","export function randomDelay(maxDelay = 1000): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      resolve();\r\n    }, Math.random() * maxDelay);\r\n  });\r\n}\r\n","module.exports = require(\"@nestjs/common\");","module.exports = require(\"@nestjs/core\");","module.exports = require(\"tslib\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\r\n * This is not a production server yet!\r\n * This is only a minimal backend to get started.\r\n */\r\n\r\nimport { Logger } from '@nestjs/common';\r\nimport { NestFactory } from '@nestjs/core';\r\n\r\nimport { AppModule } from './app/app.module';\r\n\r\nasync function bootstrap() {\r\n  const app = await NestFactory.create(AppModule);\r\n  const globalPrefix = 'api';\r\n  app.setGlobalPrefix(globalPrefix);\r\n  const port = process.env.PORT || 3333;\r\n  await app.listen(port);\r\n  Logger.log(`🚀 Application is running on: http://localhost:${port}/${globalPrefix}`);\r\n}\r\n\r\nbootstrap();\r\n"],"names":["AppModule","Module","imports","UsersModule","TicketsModule","TicketsController","constructor","ticketsService","getTickets","randomDelay","this","tickets","getTicket","id","ticket","Number","NotFoundException","createTicket","createDto","newTicket","assignTicket","ticketId","userId","assign","UnprocessableEntityException","unassignTicket","unassign","markAsComplete","complete","markAsIncomplete","Get","Param","Post","Body","Put","HttpCode","Delete","Controller","TicketsService","controllers","providers","usersService","storedTickets","description","assigneeId","completed","nextId","find","t","payload","push","user","Injectable","UsersService","UsersController","getUsers","users","getUser","exports","storedUsers","name","maxDelay","Promise","resolve","setTimeout","Math","random","module","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","app","NestFactory","create","setGlobalPrefix","port","process","env","PORT","listen","Logger","log","bootstrap"],"sourceRoot":""}